# 행성 시스템 생성 가이드

## 개요
이 문서는 Synoro 우주 탐사 시뮬레이션에서 행성계가 생성되는 원리와 각 행성을 구성하는 데이터 구조에 대해 상세히 설명합니다. 이 정보를 바탕으로 AI가 새로운 행성 생성 함수를 만들거나 기존 함수를 수정할 수 있습니다.

## 행성 데이터 구조

### 1. 행성 기본 정보 (PlanetData Interface)
행성은 다음과 같은 핵심 속성들로 구성됩니다:

- **id**: 고유 식별자 (형식: `{starId}-planet-{index}`)
- **name**: 행성 이름 (형식: `{starName} {suffix}`)
- **type**: 행성 타입 (4가지 분류)
- **size**: 행성 크기 (BASE_PLANET_RADIUS 기준)
- **color**: 행성 색상 (타입별 색상 팔레트에서 선택)
- **orbitRadius**: 궤도 반지름 (보데의 법칙 기반)
- **orbitSpeed**: 공전 속도 (궤도 반지름에 반비례)
- **rotationSpeed**: 자전 속도 (랜덤)
- **moons**: 위성 개수 (타입별 확률 적용)
- **description**: 행성 설명 (타입과 위치 기반 생성)

### 2. 행성계 데이터 구조 (PlanetSystemData Interface)
하나의 별 주위에 형성되는 행성계는 다음으로 구성됩니다:

- **starId**: 중심 별의 고유 식별자
- **starName**: 중심 별의 이름
- **planets**: 해당 별 주위의 모든 행성 배열

## 행성 타입 분류 및 특성

### 1. 암석형 행성 (rocky)
- **특징**: 단단한 표면을 가진 지구형 행성
- **색상 팔레트**: ['#8B4513', '#CD853F', '#D2691E', '#A0522D'] (갈색 계열)
- **크기 범위**: BASE_PLANET_RADIUS × (0.3 ~ 0.8)
- **위성 확률**: 30% 확률로 1-2개
- **생성 조건**: 내측 궤도 우선 배치 (첫 번째, 두 번째 행성)

### 2. 가스 거성 (gas_giant)
- **특징**: 수소와 헬륨 주성분의 거대 행성
- **색상 팔레트**: ['#FF6347', '#FFA500', '#FFD700', '#FF69B4'] (적색-주황색 계열)
- **크기 범위**: BASE_PLANET_RADIUS × (0.8 ~ 2.0)
- **위성 개수**: 1-4개 (확정)
- **생성 조건**: 중간 궤도에서 높은 확률

### 3. 얼음 거성 (ice_giant)
- **특징**: 메탄과 물얼음이 풍부한 행성
- **색상 팔레트**: ['#4169E1', '#1E90FF', '#00BFFF', '#87CEEB'] (파란색 계열)
- **크기 범위**: BASE_PLANET_RADIUS × (0.6 ~ 1.4)
- **위성 개수**: 0-2개
- **생성 조건**: 외측 궤도 우선 배치 (마지막 행성)

### 4. 왜소 행성 (dwarf)
- **특징**: 작은 크기의 미완성 천체
- **색상 팔레트**: ['#696969', '#808080', '#A9A9A9', '#D3D3D3'] (회색 계열)
- **크기 범위**: BASE_PLANET_RADIUS × (0.2 ~ 0.5)
- **위성 개수**: 거의 없음
- **생성 조건**: 소행성대나 외곽 궤도

## 궤도 거리 계산 - 보데의 법칙 (Bode's Law)

### 수식 정의
```
a = (4 + 3 × 2^n) / 10
```

여기서:
- **a**: 천문 단위(AU) 기준 궤도 반지름
- **n**: 행성 순서 (첫 번째 행성 n=0, 두 번째 n=1, ...)

### 실제 적용 과정

1. **기본 거리 계산**
   - 첫 번째 행성 (n=0): a = (4 + 0) / 10 = 0.4 AU
   - 두 번째 행성 (n=1): a = (4 + 3 × 2^0) / 10 = 0.7 AU
   - 세 번째 행성 (n=2): a = (4 + 3 × 2^1) / 10 = 1.0 AU
   - 네 번째 행성 (n=3): a = (4 + 3 × 2^2) / 10 = 1.6 AU

2. **시각적 스케일 조정**
   ```
   scaleFactor = BASE_PLANET_RADIUS × 15
   baseOrbitRadius = bodeDistance × scaleFactor
   ```

3. **변화량 적용**
   ```
   finalOrbitRadius = baseOrbitRadius × (0.9 + random(0.2))
   ```
   - 90%~110% 범위 내에서 약간의 변화 추가

## 공전 속도 계산

### 수식 정의
```
orbitSpeed = (baseSpeed + randomFactor) / orbitRadius
```

여기서:
- **baseSpeed**: 0.05 ~ 0.1 (기본 속도 범위)
- **randomFactor**: 추가 변화량
- **orbitRadius**: 계산된 궤도 반지름

### 물리적 근거
케플러 제3법칙에 따라 궤도 반지름이 클수록 공전 속도가 느려집니다. 이는 실제 태양계의 행성 운동을 모방합니다.

## 자전 속도 계산

### 수식 정의
```
rotationSpeed = random(0.1) + 0.05
```

자전 속도는 0.05 ~ 0.15 범위에서 완전 랜덤으로 설정됩니다. 실제로는 행성의 형성 과정과 충돌 역사에 따라 결정되므로 예측이 어렵습니다.

## 행성 개수 결정

### 수식
```
planetCount = floor(random(6)) + 1
```

각 별 주위에는 1~6개의 행성이 생성됩니다. 이는 관측된 외계행성계의 통계를 반영한 범위입니다.

## 행성 타입 선택 알고리즘

### 조건부 확률 시스템
1. **첫 번째 행성**: 70% 확률로 암석형
2. **두 번째 행성**: 60% 확률로 암석형
3. **마지막 행성**: 40% 확률로 얼음 거성
4. **나머지**: 50% 확률로 가스 거성 vs 암석형

### 물리적 근거
- 항성 근처: 높은 온도로 인해 암석형 행성 형성 유리
- 중간 거리: 충분한 물질로 가스 거성 형성 가능
- 외곽 거리: 낮은 온도로 얼음 거성 형성 유리

## 위성 개수 결정

### 타입별 확률
- **가스 거성**: 1-4개 (확정)
- **얼음 거성**: 0-2개
- **암석형**: 30% 확률로 1-2개
- **왜소**: 거의 없음

### 물리적 근거
큰 행성일수록 중력이 강해 더 많은 위성을 붙잡을 수 있습니다.

## 행성 이름 생성

### 명명 규칙
```
planetName = starName + " " + suffix
```

### 접미사 배열
['b', 'c', 'd', 'e', 'f', 'g', 'h']

첫 번째 발견 행성부터 순서대로 b, c, d... 형태로 명명됩니다. (a는 중심 별에 할당)

## 설명 생성 알고리즘

### 구성 요소
1. **타입별 기본 설명**: 행성의 물리적 특성
2. **거리별 추가 설명**: 항성과의 거리에 따른 환경

### 거리 구분
- **가까운 궤도** (< 8 units): "항성에 매우 가깝게 위치"
- **생명체 거주 가능 영역** (8-15 units): "생명체 거주 가능 영역에 위치"
- **외곽 궤도** (> 15 units): "항성에서 멀리 떨어진 차가운 영역에 위치"

## 수정 가능한 매개변수

### 1. 크기 조정 매개변수
- `BASE_PLANET_RADIUS`: 기본 행성 크기
- 타입별 크기 배수: rocky(0.3-0.8), gas_giant(0.8-2.0), ice_giant(0.6-1.4), dwarf(0.2-0.5)

### 2. 궤도 조정 매개변수
- `scaleFactor`: 보데의 법칙 스케일링 (현재: BASE_PLANET_RADIUS × 15)
- 궤도 변화량: (0.9 + random(0.2))

### 3. 속도 조정 매개변수
- 공전 속도 기본값: 0.05 ~ 0.1
- 자전 속도 범위: 0.05 ~ 0.15

### 4. 확률 조정 매개변수
- 행성 개수: 1-6개
- 타입별 생성 확률
- 위성 생성 확률

### 5. 색상 팔레트
각 타입별로 4개씩의 색상 코드 배열을 수정하여 시각적 다양성 조절 가능

## 물리적 현실성 고려사항

### 1. 항성 거주 가능 영역 (Habitable Zone)
현재 8-15 units로 설정된 구간으로, 액체 상태의 물이 존재 가능한 온도 범위를 의미합니다.

### 2. 조석 고정 (Tidal Locking)
매우 가까운 궤도의 행성들은 실제로는 조석 고정되어 한 면만 항성을 향하게 됩니다.

### 3. 행성 이주 (Planetary Migration)
실제로는 행성들이 형성 후 궤도를 이동할 수 있어 보데의 법칙에서 벗어날 수 있습니다.

### 4. 공명 궤도 (Orbital Resonance)
일부 행성들은 궤도 주기가 정수비를 이루어 안정성을 확보합니다.

이러한 물리적 요소들을 추가로 고려하면 더욱 현실적인 행성계 생성이 가능합니다.
