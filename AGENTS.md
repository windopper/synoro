# AGENTS.md. Synoro
*Last updated 2025-06-12*

> **목적** - 해당 파일은 모든 AI 어시스턴트 (Claude, Cursor, GPT, etc)와 해당 레포지토리를 수정하는 모든 사람들을 위한 메뉴얼입니다.
> 이 파일은 코딩 스타일, 가드레일, 워크플로우 팁을 담고 있습니다.

## 0. 프로젝트 개요
Synoro는 웹 기반 인터렉티브 우주 탐사 시뮬레이션 게임입니다. 

## 1. 규칙
| #: | AI가 할 수 있는 것 | AI가 하면 안 되는 것 |
|---|-----------------------|------------------------|
| G-0 | 프로젝트와 관련된 불확실한 점이 있다면 변경하지 전에 항상 개발자에게 설명을 요청 | ❌ 프로젝트에 특정한 내용이 확실하지 않거나, 특정 기능/결정에 대한 문맥이 없을 때 변경 사항을 작성하거나 도구를 사용하지 마십시오. |
| G-1 | 관련 소스 디렉토리 또는 명시적으로 지정된 파일 내부에서만 코드를 생성하십시오. | ❌ `tests/` 파일은 건드리지 마십시오
| G-2 | 편집된 코드 근처에 `AIDEV-NOTE:` 앵커 주석을 추가/업데이트 하십시오. | ❌ 기존 `AIDEV-` 주석을 삭제하거나 손상시키지 마십시오.
| G-3 | 300줄 이상 또는 3개 파일 이상의 변경사항에 대해서는 **확인을 요청하십시오.** | ❌ 인간의 지시 없이 대규모 모듈을 리팩토링하지 마십시오.
| G-4 | 현재 작업 컨텍스트 내에 머무르십시오. 새로 시작하는 것이 더 나은 경우 개발자에게 알리십시오. | ❌ "새 작업" 프롬프트 이후 이전 프롬프트에서 작업을 계속하지 마십시오. 새 세션을 시작하십시오.

## 2. 코딩 표준

### 2.1 TypeScript 스타일
- **엄격 모드 사용**: TypeScript strict 모드 활성화
- **타입 정의**: 모든 props, 상태, 함수에 명시적 타입 지정
- **인터페이스 우선**: `interface` 키워드를 `type`보다 우선 사용
- **제네릭 타입**: Redux 타입 안전성을 위한 `RootState`, `AppDispatch` 사용

### 2.2 React 컴포넌트 패턴
- **함수형 컴포넌트**: `React.FC` 타입과 함께 화살표 함수 사용
- **memo 최적화**: 성능이 중요한 컴포넌트에 `React.memo` 적용
- **Hooks 순서**: 커스텀 훅은 React 내장 훅 이후에 배치
- **Props 인터페이스**: 각 컴포넌트마다 별도의 Props 인터페이스 정의

### 2.3 상태 관리 (Redux Toolkit)
- **Slice 패턴**: 기능별로 Redux slice 분리
- **Typed Hooks**: `useAppSelector`, `useAppDispatch` 사용
- **비동기 액션**: `createAsyncThunk` 사용
- **Immer 활용**: 불변성 관리를 위한 Immer 패턴

### 2.4 스타일링 (Tailwind CSS)
- **유틸리티 클래스**: Tailwind utility 클래스 우선 사용
- **조건부 스타일**: `clsx`와 `tailwind-merge` 조합 사용
- **컴포넌트별 스타일**: 인라인 조건부 클래스 네이밍
- **반응형 디자인**: 모바일 우선 접근법

### 2.5 파일 명명 규칙
- **컴포넌트**: PascalCase (예: `StarMenu.tsx`)
- **유틸리티**: camelCase (예: `shipPerformanceUtils.ts`)
- **Redux Slice**: camelCase + 'Slice' 접미사 (예: `starSystemSlice.ts`)
- **타입 정의**: PascalCase + 인터페이스는 'Props', 'State' 등 접미사

### 2.6 Import/Export 규칙
- **named export 우선**: default export보다 named export 선호
- **상대 경로**: 동일 디렉터리는 상대 경로, 외부는 절대 경로 (`@/`)
- **그룹화**: React imports → 외부 라이브러리 → 내부 모듈 순서

## 3. 프로젝트 레이아웃 및 핵심 구성 요소

| 디렉터리 | 설명 |
|--------|------|
| `app/` | Next.js App Router 루트 디렉터리 |
| `app/components/` | 재사용 가능한 React 컴포넌트들 |
| `app/components/scenes/` | 3D 씬 및 시각화 컴포넌트 |
| `app/components/ui/` | 기본 UI 컴포넌트 라이브러리 |
| `app/components/star/` | 별 관련 컴포넌트 (메뉴, 정보 패널 등) |
| `app/components/ship/` | 우주선 관련 컴포넌트 |
| `app/components/systems/` | 시스템 진단 및 관리 컴포넌트 |
| `app/lib/` | 핵심 라이브러리 및 비즈니스 로직 |
| `app/lib/features/` | Redux Toolkit slices 및 상태 관리 |
| `app/lib/utils/` | 게임 시뮬레이션 및 유틸리티 함수 |
| `app/lib/hooks.ts` | Redux typed hooks 정의 |
| `app/lib/store.ts` | Redux store 설정 |
| `app/lib/utils.ts` | 범용 유틸리티 함수 (cn 등) |
| `app/data/` | 게임 내 정적 데이터 정의 |
| `app/config/` | 은하 생성 및 게임 설정 상수 |
| `app/hooks/` | 커스텀 React 훅들 |
| `app/workers/` | Web Workers 관련 파일들 |
| `public/` | 정적 에셋 (이미지, 아이콘 등) |

### 3.1 핵심 의존성
- **프레임워크**: Next.js 15.3.3 (App Router)
- **상태 관리**: Redux Toolkit, React-Redux
- **3D 그래픽스**: Three.js, React Three Fiber, Drei
- **스타일링**: Tailwind CSS 4
- **애니메이션**: Framer Motion
- **아이콘**: Lucide React
- **타입체킹**: TypeScript 5 (strict mode)

## 4. 앵커 주석
코드베이스 전체에 적절한 위치에 특별히 포맷된 주석을 추가하여 쉽게 검색할 수 있는 인라인 지식을 활용하십시오.
### 지침:
- AI 및 개발자를 대상으로 하는 주석에는 `AIDEV-NOTE:`, `AIDEV-TODO:`, 또는 `AIDEV-QUESTION:` (모두 대문자 접두사)를 사용하십시오.
- 간결하게 유지하십시오 (120자 이하).
- **중요**: 파일을 스캔하기 전에 항상 먼저 관련 하위 디렉터리에서 **기존 앵커 `AIDEV-*`**를 찾으십시오.
- 관련 코드를 수정할 때 **관련 앵커를 업데이트하십시오.**
- 명시적인 인간의 지시 없이 `AIDEV-NOTE`를 제거하지 마십시오.
- 파일 또는 코드 조각이 다음 중 하나에 해당하는 경우 관련 앵커 주석을 추가해야 합니다:
    - 너무 길거나,
    - 너무 복잡하거나,
    - 매우 중요하거나,
    - 혼란스럽거나,
    - 현재 작업 중인 작업과 관련 없는 버그가 있을 수 있는 경우.

예시:
```typescript
// AIDEV-NOTE: 
function functionName(...) {
    ...
}
```

## 5. 커밋 원칙
- 세분화된 커밋: 커밋당 하나의 논리적 변경
- AI 생성 커밋 태그 지정: 예시: `feat: 쿼리 최적화 [AI]`
- 명확한 커밋 메시지
- AI 생성 코드 검토

## 6. API 모델 및 코드 생성
*아직 작성 코드 없으므로 공백*

## 7. 주요 파일 및 패턴 참조
해당 섹션에서는 코드베이스 내의 중요한 파일 및 일반적인 패턴에 대한 포인터를 제공합니다.
- 주요 Config:
    - 위치: `/app/config`
    - 내용: 은하 생성 상수
- 컨텐츠 핵심 데이터:
    - 위치: `/app/data`
    - 패턴: 게임 내 데이터 정의
- Redux:
    - 위치: `/app/lib/features`
    - 패턴: redux-toolkit 리듀서 및 액션 함수
- 시뮬레이션 유틸 함수:
    - 위치: `/app/lib/utils`
    - 패턴: 게임 내 시뮬레이션 로직

## AI 어시스턴트 워크플로우: 단계별 방법론
사용자 지시에 응답할 때, AI 어시스턴트(Claude, Cursor, GPT 등)는 명확성, 정확성 및 유지 보수성을 보장하기 위해 다음 프로세스를 따라야 합니다:
1. 관련 지침 참조: 사용자가 지시를 내리면 요청에 대한 AGENTS.md 파일(루트 및 디렉터리별)의 관련 지침을 참조합니다.
2. 모호성 명확화: 수집할 수 있는 정보를 바탕으로 명확화가 필요한지 확인합니다. 그렇다면 진행하기 전에 사용자에게 질문을 던집니다.
3. 세분화 및 계획: 당면한 작업을 세분화하고 프로젝트 규칙 및 모범 사례를 참조하여 대략적인 수행 계획을 세웁니다.
4. 사소한 작업: 계획/요청이 사소한 경우 즉시 시작합니다.
5. 사소하지 않은 작업: 그렇지 않으면 사용자에게 계획을 제시하여 검토하고 피드백을 기반으로 반복합니다.
6. 진행 상황 추적: 다단계 또는 복잡한 작업에 대한 진행 상황을 추적하기 위해 할 일 목록(내부적으로 또는 선택적으로 TODOS.md 파일에)을 사용합니다.
7. 막히면 다시 계획: 막히거나 차단되면 3단계로 돌아가서 계획을 재평가하고 조정합니다.
8. 문서 업데이트: 사용자 요청이 완료되면 관련 앵커 주석(AIDEV-NOTE 등) 및 터치한 파일과 디렉터리의 AGENTS.md 파일을 업데이트합니다.
9. 사용자 검토: 작업을 완료한 후 사용자에게 완료된 내용을 검토하도록 요청하고 필요에 따라 프로세스를 반복합니다.
10. 세션 경계: 사용자 요청이 현재 컨텍스트와 직접 관련이 없으며 새 세션에서 안전하게 시작할 수 있는 경우, 컨텍스트 혼동을 피하기 위해 처음부터 시작하도록 제안합니다.

이 원칙은 아키텍처, 테스트, 도메인별 결정과 같은 중요한 측면에 대한 인간의 감독을 강조하여, AI가 개발을 완전히 지시하는 것이 아니라 보조하도록 보장합니다.


